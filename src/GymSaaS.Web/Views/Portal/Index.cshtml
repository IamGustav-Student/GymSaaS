@model GymSaaS.Domain.Entities.Socio
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Mi Gymvo</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

</head>
<body>
    <div class="desktop-container">
        <header class="app-header">
            <h2 class="mb-0 fw-bold">@Model.Nombre</h2>
        </header>

        <div class="container px-4">
            <div class="row g-3 mb-4">
                <div class="col-6">
                    <a asp-action="Renovar" class="btn btn-action-main bg-primary text-white h-100 flex-column">
                        <i class="bi bi-lightning-charge-fill fs-3 mb-2"></i>
                        <span>Renovar</span>
                    </a>
                </div>
                <div class="col-6">
                    <button class="btn btn-action-main bg-white text-dark border h-100 flex-column" data-bs-toggle="modal" data-bs-target="#qrModal">
                        <i class="bi bi-qr-code fs-3 mb-2 text-dark"></i>
                        <span>Mi QR</span>
                    </button>
                </div>
            </div>

        </div>

    </div>

    <div class="modal fade" id="qrModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow" style="border-radius: 20px;">
                <div class="modal-header border-0 pb-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pb-5">
                    <h4 class="fw-bold mb-3">Tu Pase de Acceso</h4>
                    <p class="text-muted small mb-4">Acerca este código al lector de la entrada</p>

                    <div id="qrcode" class="d-flex justify-content-center p-3 bg-white rounded-3 shadow-sm border mx-auto" style="width: fit-content;"></div>

                    <div class="mt-4 small text-muted">
                        <i class="bi bi-lock-fill me-1"></i> Código único y personal
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Generar QR al cargar la página
        // Usamos el CodigoAcceso del Modelo (que es el GUID)
        var qrcode = new QRCode(document.getElementById("qrcode"), {
            text: "@Model.CodigoAcceso",
            width: 200,
            height: 200,
            colorDark : "#000000",
            colorLight : "#ffffff",
            correctLevel : QRCode.CorrectLevel.H
        });
    </script>
</body>
</html>