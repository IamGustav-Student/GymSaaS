@model GymSaaS.Application.Clases.Queries.GetClases.ClaseDto

@{
    ViewData["Title"] = "Detalle de Clase";
}

<div class="d-flex justify-content-between align-items-center mb-4 fade-in">
    <div class="d-flex align-items-center">
        <a asp-action="Index" class="btn btn-outline-light btn-sm rounded-circle me-3" style="width: 32px; height: 32px; padding: 0; display: flex; align-items: center; justify-content: center;">
            <i class="bi bi-arrow-left"></i>
        </a>
        <div>
            <h2 class="fw-bold text-white mb-0">@Model.Nombre</h2>
            <p class="text-muted small mb-0">@Model.FechaHoraInicio.ToString("dddd dd/MM HH:mm") hs</p>
        </div>
    </div>

    <div class="d-flex gap-3">
        <div class="bg-dark border border-secondary rounded px-3 py-2 text-center">
            <span class="d-block text-white fw-bold">@Model.CupoReservado</span>
            <small class="text-muted" style="font-size:0.7rem;">INSCRIPTOS</small>
        </div>
        <div class="bg-dark border border-secondary rounded px-3 py-2 text-center">
            <span class="d-block text-white fw-bold">@(Model.CupoMaximo - Model.CupoReservado)</span>
            <small class="text-muted" style="font-size:0.7rem;">DISPONIBLE</small>
        </div>
    </div>
</div>

<div class="card border-0 shadow-lg fade-in-up">
    <div class="card-header bg-transparent border-0 d-flex align-items-center py-3">
        <i class="bi bi-people-fill text-primary me-2"></i> <span class="fw-bold">Listado de Asistentes</span>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="bg-dark text-white-50">
                    <tr>
                        <th class="ps-4">Alumno</th>
                        <th>Fecha Inscripción</th>
                        <th class="text-center">Estado</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var alumno in Model.Asistentes)
                    {
                        <tr>
                            <td class="ps-4 text-white fw-bold">
                                <i class="bi bi-person-circle text-muted me-2"></i> @alumno.SocioNombre
                            </td>
                            <td class="text-muted">
                                @alumno.FechaReserva.ToString("dd/MM/yyyy HH:mm")
                            </td>
                            <td class="text-center">
                                <span class="badge bg-success bg-opacity-25 text-success rounded-pill">Confirmado</span>
                            </td>
                        </tr>
                    }
                    @if (!Model.Asistentes.Any())
                    {
                        <tr>
                            <td colspan="3" class="text-center py-5">
                                <div class="text-muted">
                                    <i class="bi bi-person-dash fs-1 d-block mb-3 opacity-50"></i>
                                    <p class="small">No hay alumnos inscriptos aún.</p>
                                    <a asp-action="Reservar" asp-route-id="@Model.Id" class="btn btn-sm btn-outline-primary">
                                        Inscribir Alumno
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>